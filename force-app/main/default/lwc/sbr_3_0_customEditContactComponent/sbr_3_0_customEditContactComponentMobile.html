<template>
  <c-sbr_3_0_mobile-screen title="Edit Contact" props={mobileProps}>
    <div lwc:if={isLoading} class="slds-is-relative">
      <lightning-spinner
        variant="brand"
        size="medium"
        alternative-text="loading..."
      ></lightning-spinner>
    </div>
    <div>
      <lightning-accordion
        allow-multiple-sections-open
        active-section-name={activeSections}
      >
        <lightning-accordion-section
          name="General"
          label="General"
          class="accordion-section-border-bottom-class"
        >
          <lightning-layout multiple-rows="">
            <lightning-layout-item size="12" class="slds-var-p-around_x-small">
              <lightning-combobox
                name="Salutation"
                label={label.CON_SALUTATION}
                value={contactRecord.Salutation}
                options={salutationOptions}
                onchange={handleFieldChange}
                placeholder="--None--"
              >
              </lightning-combobox>
              <lightning-input
                label={label.CON_FIRSTNAME}
                required
                name="FirstName"
                value={contactRecord.FirstName}
                data-field
                onblur={handleFieldFocusOut}
                onchange={handleFieldChange}
                class="validate"
              >
              </lightning-input>
              <lightning-input
                label={label.CON_MIDDLENAME}
                name="MiddleName"
                value={contactRecord.MiddleName}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-input
                label={label.CON_LASTNAME}
                name="LastName"
                value={contactRecord.LastName}
                data-field
                onchange={handleFieldChange}
                onblur={handleFieldFocusOut}
                required
                class="validate"
              >
              </lightning-input>

              <lightning-input
                label={label.CON_SUFFIX}
                name="Suffix"
                value={contactRecord.Suffix}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-input
                type="text"
                label={label.ACCOUNTNAME}
                name="AccountId"
                onchange={handleFieldChange}
                max-length="255"
                value={accountName}
                disabled
                class="custom-disabled-input"
              >
              </lightning-input>
              <lightning-input
                type="tel"
                label={label.PHONE}
                name="Phone"
                value={contactRecord.Phone}
                onblur={handleFieldFocusOut}
                onchange={handleFieldChange}
                required
                class="validate"
              >
              </lightning-input>
              <lightning-input
                label={label.ACC_EMAIL}
                name="Email"
                value={contactRecord.Email}
                data-field
                onblur={handleFieldFocusOut}
                onchange={handleFieldChange}
                required
                class="validate"
              >
              </lightning-input>
              <lightning-combobox
                name="Preferred_Contact_Method__c"
                label={label.CON_PREF_CONT_METHOD}
                value={contactRecord.Preferred_Contact_Method__c}
                options={preferredMethod}
                onchange={handleFieldChange}
                placeholder="--None--"
              >
              </lightning-combobox>
              <lightning-combobox
                required="true"
                name="Status__c"
                label={label.CON_STATUS}
                value={contactRecord.Status__c}
                options={contactStatus}
                onchange={handleFieldChange}
                class="validate"
              >
              </lightning-combobox>
              <lightning-combobox
                name="Drivers_License_State__c"
                label={label.DLSTATE}
                options={dlOptions}
                onchange={handleFieldChange}
                placeholder="--None--"
                value={contactRecord.Drivers_License_State__c}
              >
              </lightning-combobox>
              <lightning-input
                label={label.DLNUMBER}
                name="Drivers_License__c"
                value={contactRecord.Drivers_License__c}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-combobox
                name="Role__c"
                label={label.CON_ROLE}
                value={contactRecord.Role__c}
                options={roles}
                onchange={handleFieldChange}
                placeholder="--None--"
              >
              </lightning-combobox>
              <lightning-textarea
                label={label.CON_DESC}
                name="Description"
                value={contactRecord.Description}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-textarea>
              <lightning-input
                label={label.CON_TITLE}
                name="Title"
                value={contactRecord.Title}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-input
                label={label.CON_MOBILE}
                name="MobilePhone"
                value={contactRecord.MobilePhone}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-input
                label={label.CON_FAX}
                name="Fax"
                value={contactRecord.Fax}
                data-field
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-record-edit-form object-api-name="Contact">
                <div class="slds-is-relative">
                  <template if:false={contactRecord.ReportsToId}
                    ><div class="input-placeholder">Search Contacts...</div>
                  </template>
                  <lightning-input-field
                    field-name="ReportsToId"
                    data-type="input-field"
                    name="ReportsToId"
                    value={contactRecord.ReportsToId}
                    data-field
                    onchange={handleFieldChange}
                  >
                  </lightning-input-field>
                </div>
              </lightning-record-edit-form>
            </lightning-layout-item>
          </lightning-layout>
        </lightning-accordion-section>
        <lightning-accordion-section
          name="Address Info"
          label="Address Info"
          class="accordion-section-border-bottom-class"
        >
          <lightning-layout multiple-rows>
            <lightning-layout-item size="12" class="slds-var-p-around_x-small">
              <div class="input-address addressFieldCss">
                <div class="slds-grid slds-grid_vertical billingaddress-grid">
                  <div class="slds-col">
                    <label class="slds-form-element__label">
                      {label.CON_ADDRS}
                    </label>
                  </div>
                  <lightning-input-address
                    variant="label-hidden"
                    address-lookup-placeholder={label.SEARCH_ADDRESS}
                    country-label={label.CON_COUNTRY}
                    street-label={label.CON_STREET}
                    city-label={label.CON_CITY}
                    province-label={label.CON_STATE}
                    postal-code-label={label.CON_ZIPCODE}
                    country-options={countryOptions}
                    province-options={stateOptions}
                    street={contactRecord.MailingStreet}
                    city={contactRecord.MailingCity}
                    country={contactRecord.MailingCountry}
                    province={contactRecord.MailingState}
                    postal-code={contactRecord.MailingPostalCode}
                    field-level-help=""
                    show-address-lookup="show-address-lookup"
                    data-name="MailingAddress"
                    onchange={addressInputChange}
                    class="validate"
                    required
                  >
                  </lightning-input-address>
                </div>
              </div>
            </lightning-layout-item>
          </lightning-layout>
        </lightning-accordion-section>
        <lightning-accordion-section
          name="Additional Contact Info"
          label="Additional Contact Info"
          class="accordion-section-border-bottom-class"
        >
          <lightning-layout multiple-rows="">
            <lightning-layout-item size="12" class="slds-var-p-around_x-small">
              <lightning-input
                type="date"
                label={label.DATE_OF_BIRTH}
                name="Birthdate"
                date-style="short"
                data-bad-input-message={label.DOBERRMSG}
                max={today}
                value={contactRecord.Birthdate}
                onchange={handleFieldChange}
                message-when-range-underflow="Date has to be from 1950s to current year."
                message-when-range-overflow={dateOfBirthOverFlowMessage}
              >
              </lightning-input>
              <lightning-combobox
                label={label.CON_LEAD_SOURCE}
                name="LeadSource"
                value={contactRecord.LeadSource}
                options={leadSource}
                onchange={handleFieldChange}
                placeholder="--None--"
              >
              </lightning-combobox>
              <lightning-input
                type="text"
                label={label.CON_ASST}
                name="AssistantName"
                value={contactRecord.AssistantName}
                onchange={handleFieldChange}
              >
              </lightning-input>
              <lightning-input
                type="text"
                label={label.CON_ASST_PHONE}
                name="AssistantPhone"
                value={contactRecord.AssistantPhone}
                onchange={handleFieldChange}
              >
              </lightning-input>
              <label
                class="slds-form-element__label"
                for="horizontal-input-id-01"
                >{label.CON_DNC}</label
              >
              <lightning-input
                type="checkbox"
                name="DoNotCall"
                data-type="checkbox"
                value={contactRecord.DoNotCall}
                onchange={handleFieldChange}
                checked={contactRecord.DoNotCall}
              >
              </lightning-input>

              <label
                class="slds-form-element__label"
                for="horizontal-input-id-02"
                >{label.CON_EOO}</label
              >
              <lightning-input
                type="checkbox"
                name="HasOptedOutOfEmail"
                data-type="checkbox"
                value={contactRecord.HasOptedOutOfEmail}
                onchange={handleFieldChange}
                checked={contactRecord.HasOptedOutOfEmail}
              >
              </lightning-input>
              <label
                class="slds-form-element__label"
                for="horizontal-input-id-03"
                >{label.CON_FOO}</label
              >
              <lightning-input
                type="checkbox"
                name="HasOptedOutOfFax"
                data-type="checkbox"
                value={contactRecord.HasOptedOutOfFax}
                onchange={handleFieldChange}
                checked={contactRecord.HasOptedOutOfFax}
              >
              </lightning-input>
            </lightning-layout-item>
          </lightning-layout>
        </lightning-accordion-section>
      </lightning-accordion>
    </div>
    <div slot="footer" class="slds-grid slds-grid_align-spread">
      <lightning-button
        label={label.CANCEL}
        class="neutral-button"
        onclick={handleCancelClick}
      ></lightning-button>

      <lightning-button
        label={label.SAVE}
        class="brand-button slds-var-p-left_small"
        onclick={submitDetails}
        variant="brand"
      ></lightning-button>
    </div>
  </c-sbr_3_0_mobile-screen>
</template>